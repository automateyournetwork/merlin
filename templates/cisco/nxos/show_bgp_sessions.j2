{% if filetype_loop_jinja2 == "csv" %}Local AS,Router ID,Total Established Peers,Total Peers,VRF Established Peers,VRF Peers,VRF,Neighbor,Connections Dropped,Last Flap,Last Read,Last Write,Local Port,Notifications Received,Notifications Sent,Remote AS,Remote Port,State{% for vrf in to_parse_bgp.vrf %}{% for neighbor in to_parse_bgp.vrf[vrf].neighbor %}
{{ to_parse_bgp.local_as }},{{ to_parse_bgp.vrf[vrf].router_id }},{{ to_parse_bgp.total_established_peers }},{{ to_parse_bgp.total_peers}},{{ to_parse_bgp.vrf[vrf].vrf_established_peers }},{{ to_parse_bgp.vrf[vrf].vrf_peers }},{{ vrf }},{{ neighbor }},{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].connections_dropped }},{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].last_flap }},{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].last_read }},{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].last_write }},{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].local_port }},{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].notifications_received }},{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].notifications_sent }},{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].remote_as }},{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].remote_port }},{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].state }}{% endfor %}{% endfor %}{% else %}{% if filetype_loop_jinja2 == "md" %}
# Show BGP Sessions
| Local AS | Router ID | Total Established Peers | Total Peers | VRF Established Peers | VRF Peers | VRF | Neighbor | Connections Dropped | Last Flap | Last Read | Last Write | Local Port | Notifications Received | Notifications Sent | Remote AS | Remote Port | State |
| -------- | --------- | ----------------------- | ----------- | --------------------- | --------- | --- | -------- | ------------------- | --------- | --------- | ---------- | ---------- | ---------------------- | ------------------ | --------- | ----------- | ----- |{% for vrf in to_parse_bgp.vrf %}{% for neighbor in to_parse_bgp.vrf[vrf].neighbor %}
| {{ to_parse_bgp.local_as }} | {{ to_parse_bgp.vrf[vrf].router_id }} | {{ to_parse_bgp.total_established_peers }} | {{ to_parse_bgp.total_peers}} | {{ to_parse_bgp.vrf[vrf].vrf_established_peers }} | {{ to_parse_bgp.vrf[vrf].vrf_peers }} | {{ vrf }} | {{ neighbor }} | {{ to_parse_bgp.vrf[vrf].neighbor[neighbor].connections_dropped }} | {{ to_parse_bgp.vrf[vrf].neighbor[neighbor].last_flap }} | {{ to_parse_bgp.vrf[vrf].neighbor[neighbor].last_read }} | {{ to_parse_bgp.vrf[vrf].neighbor[neighbor].last_write }} | {{ to_parse_bgp.vrf[vrf].neighbor[neighbor].local_port }} | {{ to_parse_bgp.vrf[vrf].neighbor[neighbor].notifications_received }} | {{ to_parse_bgp.vrf[vrf].neighbor[neighbor].notifications_sent }} | {{ to_parse_bgp.vrf[vrf].neighbor[neighbor].remote_as }} | {{ to_parse_bgp.vrf[vrf].neighbor[neighbor].remote_port }} | {{ to_parse_bgp.vrf[vrf].neighbor[neighbor].state }} |{% endfor %}{% endfor %}{% else %}
<html><head><link rel="stylesheet" href="../../../styles.css"></head><body>
<h1>Show BGP Sessions</h1>
<table class="merlin-table">
  <thead>
  <tr>
    <th>Local AS</th>
    <th>Router ID</th>
    <th>Total Established Peers</th>
    <th>Total Peers</th>
    <th>VRF Established Peers</th>
    <th>VRF Peers</th>
    <th>VRF</th>
    <th>Neighbor</th>
    <th>Connections Dropped</th>
    <th>Last Flap</th>
    <th>Last Read</th>
    <th>Last Write</th>
    <th>Local Port</th>
    <th>Notifications Received</th>
    <th>Notifications Sent</th>
    <th>Remote AS</th>
    <th>Remote Port</th>
    <th>State</th>
  </tr>
  </thead>
  <tbody>{% for vrf in to_parse_bgp.vrf %}{% for neighbor in to_parse_bgp.vrf[vrf].neighbor %}
<tr>
    <td>{{ to_parse_bgp.local_as }}</td>
    <td>{{ to_parse_bgp.vrf[vrf].router_id }}</td>
    <td>{{ to_parse_bgp.total_established_peers }}</td>
    <td>{{ to_parse_bgp.total_peers}}</td>
    <td>{{ to_parse_bgp.vrf[vrf].vrf_established_peers }}</td>
    <td>{{ to_parse_bgp.vrf[vrf].vrf_peers }}</td>
    <td>{{ vrf }}</td>
    <td>{{ neighbor }}</td>    
    <td>{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].connections_dropped }}</td>
    <td>{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].last_flap }}</td>    
    <td>{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].last_read }}</td>
    <td>{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].last_write }}</td>    
    <td>{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].local_port }}</td>
    <td>{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].notifications_received }}</td>    
    <td>{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].notifications_sent }}</td>
    <td>{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].remote_as }}</td>
    <td>{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].remote_port }}</td>
    <td>{{ to_parse_bgp.vrf[vrf].neighbor[neighbor].state }}</td>
  </tr>{% endfor %}{% endfor %}
  </tbody>  
</table>
</body></html>{% endif %}{% endif %}